{% extends "base.html" %}
{% load static %}

{% block content %}

		<!-- BEGIN #content -->
		<div id="content" class="app-content p-0">
			<!-- BEGIN profile -->
			<div class="profile">
				<div class="profile-header">
					<!-- BEGIN profile-header-cover -->
					<div class="profile-header-cover"></div>
					<!-- END profile-header-cover -->
					<!-- BEGIN profile-header-content -->
					<div class="profile-header-content">
						<!-- BEGIN profile-header-img -->
						<div class="profile-header-img">
							<img src="../assets/img/user/user-13.jpg" alt="" />
						</div>
						<!-- END profile-header-img -->
						<!-- BEGIN profile-header-info -->
						<div class="profile-header-info">
							<h4 class="mt-0 mb-1">{{profile_data.nombres}} {{profile_data.apellidos}}</h4>
							<p class="mb-2">Administrador
							</p>

						<!-- END profile-header-info -->
					</div>
					<!-- END profile-header-content -->
					<!-- BEGIN profile-header-tab -->
					<ul class="profile-header-tab nav nav-tabs">
						<li class="nav-item"><a href="#profile-about" class="nav-link active" data-bs-toggle="tab"></a></li>
					</ul>
					<!-- END profile-header-tab -->
				</div>
			</div>
			<!-- END profile -->
			<!-- BEGIN profile-content -->
			<div class="profile-content">
				<!-- BEGIN tab-content -->
				<div class="tab-content p-0">
					<!-- BEGIN #profile-post tab -->
				
					<!-- END #profile-post tab -->
					<!-- BEGIN #profile-about tab -->
					<div class="tab-pane fade show active" id="profile-about">
						<!-- BEGIN table -->
						<div class="table-responsive form-inline">
							<form method="post" action="{% url 'admprofile_update' user_id=user.id %}" id="usersprofileform">
								{% csrf_token %}
										{% comment %} {% if messages %}
											<ul class="messages">
												{% for message in messages %}
													<li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
												{% endfor %}
											</ul>
										{% endif %} {% endcomment %}
								
											<div class="row mb-15px">
												<label class="form-label col-form-label col-md-3">Nombres</label>
												<div class="col-sm-9">
													<input class="form-control" type="text" name="nombres" value="{{ profile_data.nombres }}" {% if not editable %}readonly{% endif %}>
												</div>
											</div>
										
											<div class="row mb-15px">
												<label class="form-label col-form-label col-md-3">apellidos</label>
												<div class="col-sm-9">
													<input class="form-control" type="text" name="apellidos" value=" {{profile_data.apellidos}}" {% if not editable %}readonly{% endif %}>
												</div>
											</div>
										
											<div class="row mb-15px">
												<label class="form-label col-form-label col-md-3">Dirección</label>
												<div class="col-sm-9">
													<input class="form-control" type="text" name="calle" value="{{profile_data.calle}}" {% if not editable %}readonly{% endif %}>
												</div>
											</div>
										
											<div class="row mb-15px">
												<label class="form-label col-form-label col-md-3">telefono</label>
												<div class="col-sm-9">
													<input class="form-control" type="text" name="celular" value="{{ profile_data.contact_phone }}" {% if not editable %}readonly{% endif %}>
												</div>
											</div>
										
											<div class="row mb-15px">
												<label class="form-label col-form-label col-md-3">Correo Electrónico de Contacto</label>
												<div class="col-sm-9">
													<input class="form-control" type="text" name="email" value=" {{profile_data.email}}" {% if not editable %}readonly{% endif %}>
												</div>
											</div>
										
											<div class="row mb-15px">
												<label class="form-label col-form-label col-md-3">Fecha de nacimiento</label>
												<div class="col-sm-9"  data-provide="datepicker">
													{% if profile_data.birth_date %}
														{{ profile_data.birth_date|date:"Y-m-d" }}
													{% endif %}
													<input class="form-control" type="date" name="birth_date" value="{{ profile_data.birth_date }}" {% if not editable %}readonly{% endif %}>
												</div>
											</div>

																			
										<!-- Botones de acción -->
										{% if editable %}
										<!-- Botones para guardar cambios y cancelar la edición -->
										<button type="submit" class="btn btn-success">Guardar Cambios</button>
										<a href="{% url 'user_profile_config' %}" class="btn btn-danger">Cancelar</a>
									{% else %}
										<!-- Botón para editar -->
										<a href="{% url 'user_profile_update' user_id=profile_data.id %}" class="btn btn-primary">Editar</a>
									{% endif %}
								
							</form>
						</div>
						<!-- END table -->
					</div>
					<!-- END #profile-about tab -->

					<!-- END #profile-friends tab -->
				</div>
				<!-- END tab-content -->
			</div>
			<!-- END profile-content -->
		</div>

		<!-- Código JavaScript para manejar notificaciones mediante un modal básico -->

<script>
    // Espera a que el DOM esté completamente cargado antes de ejecutar el código
    document.addEventListener('DOMContentLoaded', function () {
        // Comprueba si hay mensajes para mostrar
        {% if messages %}
            // Muestra un modal de éxito básico
            // Asegúrate de tener estilos y scripts de modal adecuados en tu proyecto
            alert("{{ messages }}");
        {% endif %}

        // Obtén el formulario y el mensaje de éxito por su identificador
        var form = document.getElementById('admprofileform');
        var successMessage = document.querySelector('.toast-success');

        // Verifica si el formulario y el mensaje de éxito existen
        if (form && successMessage) {
            // Agrega un evento de escucha al formulario para ocultar el mensaje de éxito después de enviar el formulario
            form.addEventListener('submit', function () {
                // Oculta el mensaje de éxito
                successMessage.style.display = 'none';
                // Aquí puedes agregar lógica para desactivar botones si es necesario
            });
        }
    });
    </script>
    </div>

		<!-- END #content -->

{% endblock content %}